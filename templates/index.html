<!DOCTYPE html>
<html lang="en" data-lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-en="vPrompt - Image/Video Prompt Generator" data-zh="vPrompt - ÂúñÁâá/ÂΩ±ÁâáÊèêÁ§∫Ë©ûÁîüÊàêÂô®">vPrompt - Image/Video Prompt Generator</title>
    <link rel="stylesheet" href="/static/style.css">
    <!-- HEIC support library - using multiple CDN sources for reliability -->
    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script>
        // Fallback check for heic2any library
        if (typeof heic2any === 'undefined') {
            console.warn('heic2any library failed to load from primary CDN, trying fallback...');
            var script = document.createElement('script');
            script.src = 'https://unpkg.com/heic2any@0.0.4/dist/heic2any.min.js';
            script.onload = function() {
                console.log('heic2any loaded successfully from fallback CDN');
            };
            script.onerror = function() {
                console.error('Failed to load heic2any from both CDNs');
            };
            document.head.appendChild(script);
        } else {
            console.log('heic2any library loaded successfully from primary CDN');
        }
    </script>
</head>
<body>
    <div class="container">
        <!-- Language Switcher -->
        <div class="language-switcher">
            <button id="langToggle" class="lang-btn">
                <span data-en="üá∫üá∏ EN" data-zh="üá∫üá∏ EN">üá∫üá∏ EN</span>
            </button>
        </div>
        
        <h1 data-en="vPrompt - Prompt Generator" data-zh="vPrompt - ÊèêÁ§∫Ë©ûÁîüÊàêÂô®">vPrompt - Prompt Generator</h1>
        <form method="POST" enctype="multipart/form-data" id="promptForm">
            <label data-en="Prompt Type:" data-zh="ÊèêÁ§∫Ë©ûÈ°ûÂûãÔºö">Prompt Type:</label>
            <select name="prompt_type">
                <option value="image" {% if prompt_type == 'image' %}selected{% endif %} data-en="Image" data-zh="ÂúñÁâá">Image</option>
                <option value="video" {% if prompt_type == 'video' %}selected{% endif %} data-en="Video" data-zh="ÂΩ±Áâá">Video</option>
            </select>
            <br>
            <label data-en="Language:" data-zh="Ë™ûË®ÄÔºö">Language:</label>
            <select name="output_lang">
                <option value="en" {% if output_lang == 'en' %}selected{% endif %} data-en="English" data-zh="Ëã±Ë™û">English</option>
                <option value="zh-tw" {% if output_lang == 'zh-tw' or output_lang == 'zh-TW' %}selected{% endif %} data-en="Traditional Chinese" data-zh="ÁπÅÈ´î‰∏≠Êñá">Traditional Chinese</option>
                <option value="zh-cn" {% if output_lang == 'zh-cn' or output_lang == 'zh-CN' %}selected{% endif %} data-en="Simplified Chinese" data-zh="Á∞°È´î‰∏≠Êñá">Simplified Chinese</option>
                <option value="ja" {% if output_lang == 'ja' %}selected{% endif %} data-en="Japanese" data-zh="Êó•Ë™û">Japanese</option>
                <option value="ko" {% if output_lang == 'ko' %}selected{% endif %} data-en="Korean" data-zh="ÈüìË™û">Korean</option>
                <option value="fr" {% if output_lang == 'fr' %}selected{% endif %} data-en="French" data-zh="Ê≥ïË™û">French</option>
                <option value="de" {% if output_lang == 'de' %}selected{% endif %} data-en="German" data-zh="Âæ∑Ë™û">German</option>
                <option value="es" {% if output_lang == 'es' %}selected{% endif %} data-en="Spanish" data-zh="Ë•øÁè≠ÁâôË™û">Spanish</option>
            </select>
            <br>
            <label data-en="Upload Image:" data-zh="‰∏äÂÇ≥ÂúñÁâáÔºö">Upload Image:</label>
            <div class="drop-zone" id="dropZone">
                <div class="drop-zone-content" id="dropZoneContent">
                    <div class="drop-zone-icon">üìÅ</div>
                    <div class="drop-zone-text">
                        <p><strong data-en="Drag and drop image here" data-zh="ÊãñÊîæÂúñÁâáËá≥Ê≠§Ëôï">Drag and drop image here</strong></p>
                        <p data-en="or " data-zh="Êàñ ">or <span class="drop-zone-browse" data-en="click to browse" data-zh="ÈªûÊìäÁÄèË¶Ω">click to browse</span></p>
                        <p class="drop-zone-formats" data-en="Supports PNG, JPG, JPEG, GIF, HEIC" data-zh="ÊîØÊè¥ PNG„ÄÅJPG„ÄÅJPEG„ÄÅGIF„ÄÅHEIC">Supports PNG, JPG, JPEG, GIF, HEIC</p>
                    </div>
                </div>
                <div class="drop-zone-preview" id="dropZonePreview" style="display:none;">
                    <img id="previewImage" src="" alt="Preview Image">
                    <div class="preview-overlay">
                        <div class="preview-info" id="previewInfo"></div>
                        <button type="button" class="remove-image" id="removeImage">√ó</button>
                    </div>
                </div>
            </div>
            <input type="file" name="image" id="fileInput" accept="image/*,.heic,.heif" style="display:none;">
            <br>
            <label data-en="Time:" data-zh="ÊôÇÈñìÔºö">Time:</label>
            <input type="time" name="time" min="00:00" max="23:59" value="{{ time }}">
            <br>
            <label data-en="Scene:" data-zh="Â†¥ÊôØÔºö">Scene:</label>
            <select name="scene" id="sceneSelect">
                <option value="Êà∂Â§ñ" {% if scene == 'Êà∂Â§ñ' %}selected{% endif %} data-en="Outdoor" data-zh="Êà∂Â§ñ">Outdoor</option>
                <option value="ÂÆ§ÂÖß" {% if scene == 'ÂÆ§ÂÖß' %}selected{% endif %} data-en="Indoor" data-zh="ÂÆ§ÂÖß">Indoor</option>
                <option value="ÂÖ∂ÂÆÉ" {% if scene == 'ÂÖ∂ÂÆÉ' or not scene %}selected{% endif %} data-en="Other" data-zh="ÂÖ∂ÂÆÉ">Other</option>
            </select>
            <input type="text" name="custom_scene" id="customSceneInput" data-en-placeholder="e.g.: Forest, Beach, Cafe, Office..." data-zh-placeholder="‰æãÂ¶ÇÔºöÊ£ÆÊûó„ÄÅÊµ∑ÈÇä„ÄÅÂíñÂï°Âª≥„ÄÅËæ¶ÂÖ¨ÂÆ§..." placeholder="e.g.: Forest, Beach, Cafe, Office..." style="display:inline;" value="{{ custom_scene }}">
            <br>
            <label data-en="Character:" data-zh="‰∏ªËßíÔºö">Character:</label>
            <select name="character" id="characterSelect">
                <option value="Áî∑" {% if character == 'Áî∑' %}selected{% endif %} data-en="Man" data-zh="Áî∑">Man</option>
                <option value="Áî∑Â≠©" {% if character == 'Áî∑Â≠©' %}selected{% endif %} data-en="Boy" data-zh="Áî∑Â≠©">Boy</option>
                <option value="ËÄÅ‰∫∫ÔºàÁî∑Ôºâ" {% if character == 'ËÄÅ‰∫∫ÔºàÁî∑Ôºâ' %}selected{% endif %} data-en="Elderly Man" data-zh="ËÄÅ‰∫∫ÔºàÁî∑Ôºâ">Elderly Man</option>
                <option value="Â•≥" {% if character == 'Â•≥' %}selected{% endif %} data-en="Woman" data-zh="Â•≥">Woman</option>
                <option value="Â•≥Â≠©" {% if character == 'Â•≥Â≠©' %}selected{% endif %} data-en="Girl" data-zh="Â•≥Â≠©">Girl</option>
                <option value="ËÄÅ‰∫∫ÔºàÂ•≥Ôºâ" {% if character == 'ËÄÅ‰∫∫ÔºàÂ•≥Ôºâ' %}selected{% endif %} data-en="Elderly Woman" data-zh="ËÄÅ‰∫∫ÔºàÂ•≥Ôºâ">Elderly Woman</option>
                <option value="ÂÖ∂ÂÆÉ" {% if character == 'ÂÖ∂ÂÆÉ' or not character %}selected{% endif %} data-en="Other" data-zh="ÂÖ∂ÂÆÉ">Other</option>
            </select>
            <input type="text" name="custom_character" id="customCharacterInput" data-en-placeholder="e.g.: Couple, Photographer, Student, Businessman, Artist..." data-zh-placeholder="‰æãÂ¶ÇÔºöÊÉÖ‰æ∂„ÄÅÊîùÂΩ±Â∏´„ÄÅÂ≠∏Áîü„ÄÅÂïÜ‰∫∫„ÄÅËóùË°ìÂÆ∂„ÄÅ..." placeholder="e.g.: Couple, Photographer, Student, Businessman, Artist..." style="display:inline;" value="{{ custom_character }}">
            <br>
            <label data-en="Story Description:" data-zh="ÊïÖ‰∫ãÊèèËø∞Ôºö">Share the thought:</label>
            <textarea name="extra_desc" data-en-placeholder="Describe style, mood, action, camera movement, angle, etc... e.g.: Tracking shot, warm sunlight, vintage style, happy expression, low angle shot" data-zh-placeholder="ÊèèËø∞È¢®Ê†º„ÄÅÊÉÖÁ∑í„ÄÅÂãï‰Ωú„ÄÅÈÅãÈè°„ÄÅËßíÂ∫¶Á≠â... ‰æãÂ¶ÇÔºöËøΩËπ§Èè°È†≠„ÄÅÊ∫´ÊöñÁöÑÈôΩÂÖâ„ÄÅÂæ©Âè§È¢®Ê†º„ÄÅÂø´Ê®ÇÁöÑË°®ÊÉÖ„ÄÅ‰ΩéËßíÂ∫¶ÊãçÊîù" placeholder="Describe style, mood, action, camera movement, angle, etc... e.g.: Tracking shot, warm sunlight, vintage style, happy expression, low angle shot" rows="3" style="width: 100%; resize: vertical;">{{ extra_desc }}</textarea>
            <br>
            <div class="creative-mode-container" style="margin: 15px 0; padding: 12px; background-color: #f8f9fa; border-radius: 8px; border-left: 4px solid #6366f1;">
                <label class="creative-mode-label" style="display: flex; align-items: center; cursor: pointer; font-weight: 500;">
                    <input type="checkbox" name="creative_mode" id="creativeMode" value="true" {% if creative_mode %}checked{% endif %} style="margin-right: 10px; transform: scale(1.2);">
                    <span class="creative-mode-text">
                        <span class="creative-mode-title" data-en="üé® Creative Mode" data-zh="üé® ÂâµÊÑèÊ®°Âºè">üé® Creative Mode</span>
                        <span class="creative-mode-desc" data-en=" - Generate more artistic, experimental, and imaginative prompts with enhanced visual storytelling" data-zh=" - ÁîüÊàêÊõ¥ÂÖ∑ËóùË°ìÊÄß„ÄÅÂØ¶È©óÊÄßÂíåÊÉ≥ÂÉèÂäõÁöÑÊèêÁ§∫Ë©ûÔºåÂ¢ûÂº∑Ë¶ñË¶∫ÊïÖ‰∫ãÊïòËø∞"> - Generate more artistic, experimental, and imaginative prompts with enhanced visual storytelling</span>
                    </span>
                </label>
            </div>
            <br>
            <div class="tip" style="background-color: #f0f8ff; padding: 10px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #4CAF50;">
                <strong>üí° <span data-en="Tip:" data-zh="ÊèêÁ§∫Ôºö">Tip:</span></strong><span data-en="Even without uploading an image, the system will generate rich prompts based on your selected scene, character, time, and additional description!" data-zh="Âç≥‰ΩøÊ≤íÊúâ‰∏äÂÇ≥ÂúñÁâáÔºåÁ≥ªÁµ±‰πüÊúÉÊ†πÊìöÊÇ®ÈÅ∏ÊìáÁöÑÂ†¥ÊôØ„ÄÅ‰∏ªËßí„ÄÅÊôÇÈñìÂíåÈ°çÂ§ñÊèèËø∞‰æÜÁîüÊàêË±êÂØåÁöÑÊèêÁ§∫Ë©ûÔºÅ">Even without uploading an image, the system will generate rich prompts based on your selected scene, character, time, and additional description!</span>
            </div>
            <br>
            <button type="submit" data-en="Generate Prompt" data-zh="ÁîüÊàêÊèêÁ§∫Ë©û">Generate Prompt</button>
        </form>
        
        <!-- Loading indicator -->
        <div id="loadingIndicator" style="display: none; text-align: center; padding: 20px; margin: 20px 0; background-color: #f8f9fa; border-radius: 8px; border: 2px dashed #6366f1;">
            <div style="font-size: 24px; margin-bottom: 10px;">‚è≥</div>
            <div style="font-size: 16px; font-weight: 500; color: #6366f1;" data-en="Generating your prompt..." data-zh="Ê≠£Âú®ÁîüÊàêÊÇ®ÁöÑÊèêÁ§∫Ë©û...">Generating your prompt...</div>
            <div style="font-size: 14px; color: #666; margin-top: 5px;" data-en="Please wait while AI analyzes and creates your content..." data-zh="Ë´ãÁ®çÂÄôÔºåAI Ê≠£Âú®ÂàÜÊûê‰∏¶ÂâµÂª∫ÊÇ®ÁöÑÂÖßÂÆπ...">Please wait while AI analyzes and creates your content...</div>
        </div>
        
        <hr>
        {% if image_url %}
        <div>
            <h3 data-en="Uploaded Image:" data-zh="Â∑≤‰∏äÂÇ≥ÂúñÁâáÔºö">Uploaded Image:</h3>
            <img src="{{ image_url }}" alt="Uploaded Image" style="max-width:300px;">
        </div>
        {% endif %}
        {% if prompt_text %}
        <div>
            <h2 data-en="Complete Prompt (Text)" data-zh="ÂÆåÊï¥ÊèêÁ§∫Ë©ûÔºàÊñáÊú¨Ôºâ">Complete Prompt (Text)</h2>
            <textarea id="promptTextArea" readonly style="width:100%;height:140px;">{{ prompt_text }}</textarea>
            <div class="button-container">
                <a href="/download_prompt?prompt={{ prompt_text }}" download data-en="Download Text" data-zh="‰∏ãËºâÊñáÊú¨">Download Text</a>
                <button type="button" id="copyTextBtn" data-en="Copy All Text" data-zh="Ë§áË£ΩÂÖ®ÈÉ®ÊñáÊú¨">Copy All Text</button>
            </div>
        </div>
        {% endif %}
        {% if prompt_json %}
        <div>
            <h2 data-en="Veo3 Prompt (JSON)" data-zh="Veo3 ÊèêÁ§∫Ë©ûÔºàJSONÔºâ">Veo3 Prompt (JSON)</h2>
            <textarea id="promptJsonArea" readonly style="width:100%;height:180px;">{{ prompt_json_str }}</textarea>
            <div class="button-container">
                <a href="/download_json?prompt_json={{ prompt_json_str|urlencode }}" download data-en="Download JSON" data-zh="‰∏ãËºâ JSON">Download JSON</a>
                <button type="button" id="copyJsonBtn" data-en="Copy All JSON" data-zh="Ë§áË£ΩÂÖ®ÈÉ® JSON">Copy All JSON</button>
            </div>
        </div>
        {% endif %}
    </div>
    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script src="/static/script.js"></script>
</body>
</html>
